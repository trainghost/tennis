<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>회원 체크리스트</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container my-4">
    <h2>회원 체크리스트</h2>
    <form method="post" class="row g-2 mb-3">
        <div class="col"><input type="text" name="name" class="form-control" placeholder="이름" required></div>
        <div class="col">
            <select name="gender" class="form-select">
                <option value="남">남</option>
                <option value="여">여</option>
            </select>
        </div>
        <div class="col"><input type="number" name="rank" class="form-control" placeholder="순위"></div>
        <div class="col"><button class="btn btn-primary w-100">추가</button></div>
        <div class="col"><a href="/generate" class="btn btn-success w-100">대진표 생성</a></div>
     
    </form>

    <form action="/upload" method="post" enctype="multipart/form-data">
          <label>엑셀 업로드로 회원 추가:</label>
          <input type="file" name="file" accept=".xlsx">
          <button type="submit">업로드</button>
    </form>



    
    <table class="table table-bordered table-hover text-center">
        <thead class="table-light"><tr><th>#</th><th>이름</th><th>성별</th><th>순위</th><th>화</th><th>목</th><th>참여</th><th>삭제</th></tr></thead>
        <tbody>
            {% for m in members %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ m.name }}</td>
                <td>{{ m.gender }}</td>
                <td>
                  <form action="{{ url_for('update_rank', idx=loop.index0) }}" method="post" style="display:inline;">
                    <input type="number" name="rank" value="{{ m.rank }}" style="width: 50px;" />
                    <button type="submit" class="btn btn-sm btn-primary">저장</button>
                  </form>
                </td>

                <td><a href="/toggle/{{ loop.index0 }}/tuesday">{{ "✅" if m.tuesday else "" }}</a></td>
                <td><a href="/toggle/{{ loop.index0 }}/thursday">{{ "✅" if m.thursday else "" }}</a></td>
                <td><a href="/toggle/{{ loop.index0 }}/participated">{{ "✅" if m.participated else "" }}</a></td>
                <td><a href="/delete/{{ loop.index0 }}" class="btn btn-sm btn-danger">삭제</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
