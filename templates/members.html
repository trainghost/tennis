<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íšŒì› ëª©ë¡ ë° ë§¤ì¹­</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            background-color: #f8f9fa; /* ë°ì€ íšŒìƒ‰ ë°°ê²½ */
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .container {
            max-width: 1200px; /* ë°ìŠ¤í¬í†±ì—ì„œ ë„ˆë¬´ ë„“ì–´ì§€ëŠ” ê²ƒì„ ë°©ì§€ */
        }
        .match-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #ffffff; /* í°ìƒ‰ ë°°ê²½ */
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,.08); /* ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
        }
        .summary-card {
            border-left: 5px solid #007bff; /* íŒŒë€ìƒ‰ ì¢Œì¸¡ í…Œë‘ë¦¬ */
            border-radius: 5px;
            background-color: #e9f5ff; /* ì—°í•œ íŒŒë€ìƒ‰ ë°°ê²½ */
            padding: 15px;
            margin-bottom: 20px;
        }
        .summary-card h5 {
            margin-bottom: 0;
            color: #0056b3;
        }
        .table-match-results th, .table-match-results td {
            text-align: center;
            vertical-align: middle;
            padding: 0.75rem; /* ì…€ íŒ¨ë”© */
        }
        .table-match-results td:first-child {
            font-weight: bold;
            color: #495057;
        }
        .table-match-results thead th {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        .table-match-results tbody tr:nth-of-type(odd) {
            background-color: rgba(0, 0, 0, 0.03);
        }
        .btn-success {
            background-color: #28a745;
            border-color: #28a745;
        }
        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
        .text-muted-small {
            font-size: 0.9em;
            color: #6c757d;
        }
        .non-selected-list {
            list-style: none;
            padding-left: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .non-selected-list li {
            background-color: #e2e6ea;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }

        /* ë¯¸ë””ì–´ ì¿¼ë¦¬: ì‘ì€ í™”ë©´ (ëª¨ë°”ì¼) ìµœì í™” */
        @media (max-width: 767.98px) {
            h2, h3, h4 {
                font-size: 1.5rem; /* ëª¨ë°”ì¼ì—ì„œ ì œëª© í¬ê¸° ì¡°ì • */
            }
            .summary-card h5 {
                font-size: 1.1rem;
            }
            .table th, .table td {
                padding: 0.5rem; /* ëª¨ë°”ì¼ì—ì„œ í…Œì´ë¸” ì…€ íŒ¨ë”© ì¤„ì´ê¸° */
                font-size: 0.9em; /* ëª¨ë°”ì¼ì—ì„œ í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì • */
            }
            .form-control-sm {
                width: 70px; /* ìˆœìœ„ ìˆ˜ì • ì…ë ¥ë€ ë„ˆë¹„ ì¡°ì • */
            }
            .match-section {
                padding: 15px;
            }
            .table-match-results td:first-child {
                min-width: 80px; /* ì½”íŠ¸ëª… ì»¬ëŸ¼ ìµœì†Œ ë„ˆë¹„ í™•ë³´ */
            }
            .non-selected-list {
                flex-direction: column; /* ë¯¸ì„ ë°œì ëª©ë¡ ì„¸ë¡œë¡œ ì •ë ¬ */
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4 text-center text-primary">íšŒì› ëª©ë¡ ë° ë§¤ì¹­ ì„¤ì • ğŸ“‹</h2>

        <div class="match-section mb-5">
            <h3 class="mb-3 text-secondary">ì „ì²´ íšŒì› ëª©ë¡ (ì°¸ì—¬/ìˆœìœ„ ì„¤ì •)</h3>
            <div class="alert alert-info" role="alert">
                ì°¸ì—¬í•  íšŒì›ì„ ì„ íƒí•˜ê³ , í•„ìš”ì‹œ ìˆœìœ„ë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”. 
                <span class="d-block d-md-inline">ë§¤ì¹­ì€ **'ì°¸ì—¬'ì— ì²´í¬ëœ íšŒì›ë“¤** ì¤‘ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.</span>
            </div>
            <div class="table-responsive">
                <form action="/members" method="post" class="needs-validation" novalidate>
                    <table class="table table-hover table-striped caption-top">
                        <caption>* ìˆœìœ„ë¥¼ ìˆ˜ì •í•˜ë ¤ë©´ ìˆ«ìë¥¼ ì…ë ¥ í›„ 'ì €ì¥' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</caption>
                        <thead>
                            <tr>
                                <th>ìˆœìœ„</th>
                                <th>ì´ë¦„</th>
                                <th>ì„±ë³„</th>
                                <th class="text-center">ì°¸ì—¬</th>
                                <th class="text-center">ì¼í‡´</th>
                                <th class="text-center">ëŠ¦ì°¸</th>
                                <th>ìˆœìœ„ ìˆ˜ì •</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for member in members %}
                            <tr>
                                <td>{{ member.ìˆœìœ„ }}</td>
                                <td>{{ member.ì´ë¦„ }}</td>
                                <td>{{ member.ì„±ë³„ }}</td>
                                <td class="text-center">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" name="participate_{{ member.ì´ë¦„ }}" id="participate_{{ member.ì´ë¦„ }}" {% if member.ì°¸ì—¬ %}checked{% endif %}>
                                        <label class="form-check-label visually-hidden" for="participate_{{ member.ì´ë¦„ }}">ì°¸ì—¬</label>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" name="early_{{ loop.index0 }}" id="early_{{ loop.index0 }}" {% if member.ì¼í‡´ %}checked{% endif %}>
                                        <label class="form-check-label visually-hidden" for="early_{{ loop.index0 }}">ì¼í‡´</label>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" name="late_{{ loop.index0 }}" id="late_{{ loop.index0 }}" {% if member.ëŠ¦ì°¸ %}checked{% endif %}>
                                        <label class="form-check-label visually-hidden" for="late_{{ loop.index0 }}">ëŠ¦ì°¸</label>
                                    </div>
                                </td>
                                <td>
                                    <input type="number" class="form-control form-control-sm" name="rank_{{ member.ì´ë¦„ }}" value="{{ member.ìˆœìœ„ }}" min="1">
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <button type="submit" class="btn btn-success mt-3 w-100">ì„ íƒ ì €ì¥ ë° ë§¤ì¹­ ê²°ê³¼ ë³´ê¸° âœ…</button>
                </form>
            </div>
        </div>

        <hr class="my-5">
        <div class="match-section">
            <h3 class="mb-3 text-primary">ğŸ† ë§¤ì¹­ 1 ê²°ê³¼ (ì½”íŠ¸ 3, 4, 5)</h3>
            <div class="summary-card">
                <h5 class="card-title">ìš”ì•½: ì´ {{ summary_1.total }}ëª… ì°¸ì—¬ (ì—¬ì {{ summary_1.female }}ëª… / ë‚¨ì {{ summary_1.male }}ëª…)</h5>
            </div>

            {% if team_match_results_1 %}
            <h4 class="mb-3 text-center">ë§¤ì¹­ 1 ëŒ€ì§„í‘œ</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-match-results">
                    <thead>
                        <tr>
                            <th>ì½”íŠ¸</th>
                            <th colspan="2">íŒ€ A</th>
                            <th>vs</th>
                            <th colspan="2">íŒ€ B</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for match in team_match_results_1 %}
                        <tr>
                            <td>{{ match.court }}</td>
                            <td>{{ match.team_a[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_a[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[1].ìˆœìœ„ }}ìœ„)</span></td>
                            <td></td> {# "vs"ëŠ” thì— ìˆìœ¼ë¯€ë¡œ ì—¬ê¸°ëŠ” ë¹„ì›Œë‘  #}
                            <td>{{ match.team_b[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_b[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[1].ìˆœìœ„ }}ìœ„)</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-muted text-center">ë§¤ì¹­ 1 ëŒ€ì§„í‘œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. (ì°¸ì—¬ ì¸ì› ë¶€ì¡± ë˜ëŠ” ì¡°ê±´ ë¶ˆì¼ì¹˜)</p>
            {% endif %}

            {% if non_selected_participants_1 %}
            <h5 class="mt-4 text-warning">ë§¤ì¹­ 1 ë¯¸ì„ ë°œ ì°¸ì—¬ì ğŸš§:</h5>
            <ul class="non-selected-list">
                {% for p in non_selected_participants_1 %}
                <li>{{ p.ì´ë¦„ }} ({{ p.ìˆœìœ„ }}ìœ„)</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

        <hr class="my-5">
        <div class="match-section">
            <h3 class="mb-3 text-primary">ğŸ¥ˆ ë§¤ì¹­ 2 ê²°ê³¼ (ì½”íŠ¸ 3, 4, 5)</h3>
            <div class="summary-card">
                <h5 class="card-title">ìš”ì•½: ì´ {{ summary_2.total }}ëª… ì°¸ì—¬ (ì—¬ì {{ summary_2.female }}ëª… / ë‚¨ì {{ summary_2.male }}ëª…)</h5>
            </div>

            {% if team_match_results_2 %}
            <h4 class="mb-3 text-center">ë§¤ì¹­ 2 ëŒ€ì§„í‘œ</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-match-results">
                    <thead>
                        <tr>
                            <th>ì½”íŠ¸</th>
                            <th colspan="2">íŒ€ A</th>
                            <th>vs</th>
                            <th colspan="2">íŒ€ B</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for match in team_match_results_2 %}
                        <tr>
                            <td>{{ match.court }}</td>
                            <td>{{ match.team_a[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_a[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[1].ìˆœìœ„ }}ìœ„)</span></td>
                            <td></td>
                            <td>{{ match.team_b[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_b[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[1].ìˆœìœ„ }}ìœ„)</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-muted text-center">ë§¤ì¹­ 2 ëŒ€ì§„í‘œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. (ì°¸ì—¬ ì¸ì› ë¶€ì¡± ë˜ëŠ” ì¡°ê±´ ë¶ˆì¼ì¹˜)</p>
            {% endif %}

            {% if non_selected_participants_2 %}
            <h5 class="mt-4 text-warning">ë§¤ì¹­ 2 ë¯¸ì„ ë°œ ì°¸ì—¬ì ğŸš§:</h5>
            <ul class="non-selected-list">
                {% for p in non_selected_participants_2 %}
                <li>{{ p.ì´ë¦„ }} ({{ p.ìˆœìœ„ }}ìœ„)</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

        <hr class="my-5">
        <div class="match-section">
            <h3 class="mb-3 text-primary">ğŸ¥‰ ë§¤ì¹­ 3 ê²°ê³¼ (ì½”íŠ¸ 3, 4, 5)</h3>
            <div class="summary-card">
                <h5 class="card-title">ìš”ì•½: ì´ {{ summary_3.total }}ëª… ì°¸ì—¬ (ì—¬ì {{ summary_3.female }}ëª… / ë‚¨ì {{ summary_3.male }}ëª…)</h5>
            </div>

            {% if team_match_results_3 %}
            <h4 class="mb-3 text-center">ë§¤ì¹­ 3 ëŒ€ì§„í‘œ</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-match-results">
                    <thead>
                        <tr>
                            <th>ì½”íŠ¸</th>
                            <th colspan="2">íŒ€ A</th>
                            <th>vs</th>
                            <th colspan="2">íŒ€ B</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for match in team_match_results_3 %}
                        <tr>
                            <td>{{ match.court }}</td>
                            <td>{{ match.team_a[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_a[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_a[1].ìˆœìœ„ }}ìœ„)</span></td>
                            <td></td>
                            <td>{{ match.team_b[0].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[0].ìˆœìœ„ }}ìœ„)</span></td>
                            <td>{{ match.team_b[1].ì´ë¦„ }} <span class="text-muted-small">({{ match.team_b[1].ìˆœìœ„ }}ìœ„)</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-muted text-center">ë§¤ì¹­ 3 ëŒ€ì§„í‘œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. (ì°¸ì—¬ ì¸ì› ë¶€ì¡± ë˜ëŠ” ì¡°ê±´ ë¶ˆì¼ì¹˜)</p>
            {% endif %}

            {% if non_selected_participants_3 %}
            <h5 class="mt-4 text-warning">ë§¤ì¹­ 3 ë¯¸ì„ ë°œ ì°¸ì—¬ì ğŸš§:</h5>
            <ul class="non-selected-list">
                {% for p in non_selected_participants_3 %}
                <li>{{ p.ì´ë¦„ }} ({{ p.ìˆœìœ„ }}ìœ„)</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

        <div class="text-center mt-5">
            <a href="/" class="btn btn-secondary">ë‹¤ì‹œ íŒŒì¼ ì—…ë¡œë“œ ğŸ”„</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
